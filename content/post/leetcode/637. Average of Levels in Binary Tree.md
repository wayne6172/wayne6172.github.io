---
title: "637. Average of Levels in Binary Tree"
date: 2022-09-02T12:50:58+08:00
categories:
- Leetcode
tags:
- Tree
- Depth-First Search
- Breadth-First Search
- Binary Tree
- Leetcode Complete

draft: false
summary: 2022/09/02 leetcodeæ—¥å¸¸ (Easyé›£åº¦)
thumbnailImage: leetcode/leetcode_icon.png
thumbnailImagePosition: right
---

{{< toc >}}

## é¡Œç›®æ•˜è¿°

### åŸæ–‡

> Given the `root` of a binary tree, return **the average value of the nodes on each level in the form of an array**. Answers within `10^-5` of the actual answer will be accepted.

### Constraints

>
> - The number of nodes in the tree is in the range `[1, 10^4]`.
> - `-2^31 <= Node.val <= 2^31 - 1`

### è§£æ

çµ¦ä¸€æ£µæ¨¹ï¼Œå›å‚³æ¯å€‹levelä¸­æ‰€æœ‰ç¯€é»ä¸­çš„å€¼çš„å¹³å‡å€¼(ä»¥é™£åˆ—è¡¨ç¤º)ã€‚

### ç¬¬ä¸€æƒ³æ³•

ç”¨DFSä¾†è¨ˆç®—æ¯ä¸€å±¤çš„å€¼ç¸½å’Œä»¥åŠç¯€é»æ•¸é‡ä¾†å–å¾—å¹³å‡å€¼ï¼Œä½†è¦æ³¨æ„çš„æ˜¯å€¼åŸŸæœƒåˆ°æ­£è² `2^31`ï¼Œå› æ­¤è¦å°å¿ƒoverflowã€‚é€™é‚Šå°±ç”¨Golangçš„`int64`ä¾†è™•ç†æ‡‰è©²å°±å¥½äº†ã€‚

```go
type Solution struct {
    LevelSum   []int64
    LevelNodes []int
}

func NewSolution() Solution {
    return Solution{
        LevelSum:   make([]int64, 10000),
        LevelNodes: make([]int, 10000),
    }
}

func (solution *Solution) dfs(root *TreeNode, level int) {
    if root != nil {
        solution.LevelSum[level] += int64(root.Val)
        solution.LevelNodes[level] += 1

        solution.dfs(root.Left, level+1)
        solution.dfs(root.Right, level+1)
    }
}

func averageOfLevels(root *TreeNode) []float64 {
    solution := NewSolution()
    solution.dfs(root, 0)

    maxLevel := 0
    for i := 0; i < 10000; i++ {
        if solution.LevelNodes[i] == 0 {
            maxLevel = i
            break
        }
    }

    ans := make([]float64, maxLevel)
    for i := 0; i < maxLevel; i++ {
        ans[i] = float64(solution.LevelSum[i]) / float64(solution.LevelNodes[i])
    }

    return ans
}
```

> **Success**
>
> Runtime: 19 ms, faster than 23.36% of Go online submissions for Average of Levels in Binary Tree.
>
> Memory Usage: 7 MB, less than 14.95% of Go online submissions for Average of Levels in Binary Tree.

{{< alert warning >}}
Runtime ç™¾åˆ†æ¯”åƒ…æœ‰ 23.36%ï¼ŒMemoryç‹€æ…‹ä¹Ÿä¸æ˜¯å¾ˆç†æƒ³
{{< /alert >}}

### ç¬¬ä¸€æƒ³æ³•ï¼šè¨è«–

å¾Œä¾†å…¶å¯¦æœ‰æƒ³éç”¨BFSä¾†è§£...åªæ˜¯Golangçš„queueä¸çŸ¥é“è©²æ€éº¼å¯¦ä½œï¼Œæ‡‰è©²èªªè¦æ€éº¼åšæ‰èƒ½ä¸å¿…ç›´æ¥å®šç¾©å‡ºå¾ˆå¤§çš„è¨˜æ†¶é«”ç©ºé–“ï¼Œè€Œæ˜¯æ”¹ç”¨å‹•æ…‹é…ç½®çš„æ–¹å¼ä¾†Newã€‚

å…¶å¯¦æ‡‰è©²æ˜¯å¯ä»¥ç›´æ¥åœŸæ³•ç…‰é‹¼...ä½†æœ‰é»å¤ªæ‡¶äº†ğŸ¤£ï¼Œæ‰€ä»¥æ‰å°è‡´è¨˜æ†¶é«”è·ŸRuntimeéƒ½é‚£éº¼çˆ›å§

## å·çœ‹ä¸€ä¸‹ç¶²è·¯è§£ (70ms)

```go
func averageOfLevels(root *TreeNode) []float64 {
    
    result := make([]float64, 0)  
    
    if root == nil {
        return result
    }
    
    sum := make([]int, 0)
    total := make([]int, 0)
    
    var traverse func(n *TreeNode, level int) 
    traverse = func(n *TreeNode, level int) {
        
        if n == nil {
            return
        }
        
        if level > len(total) {
            sum = append(sum, n.Val)
            
            total = append(total, 1)
        } else {
            
            sum[level - 1] += n.Val
            total[level - 1]++
        }
        
        traverse(n.Left, level + 1)
        traverse(n.Right, level + 1)
    }
    
    traverse(root, 1)
    
    for i := 0; i < len(sum); i++ {
        result = append(result, float64(sum[i])/float64(total[i]))
    }
    
    return result
}
```

### ç¶²è·¯è§£ï¼šè¨è«–

é˜¿å°é½ï¼Œå®Œå…¨å¿˜è¨˜å¯ä»¥ç”¨ **é–‰åŒ…(Closure)** çš„æ¦‚å¿µä¾†å¯«ï¼Œç„¶å¾Œä¹Ÿå¿˜è¨˜makeæ™‚çš„bufferæ”¾0å¾Œï¼Œç”¨appendå»å‹•æ…‹é…ç½®ï¼Œå®Œæˆä¸€å€‹ç°¡æ˜“çš„queueğŸ˜¨ï¼Œé€™é»æˆ‘ç¢ºå¯¦è©²æ‰“å±è‚¡ğŸ˜¥

## çµè«–

ç¸½ä¹‹ï¼Œè‡³å°‘é€™æ¬¡å¤šå°‘åˆå–šé†’äº†Golangçš„ä¸€äº›è¨˜æ†¶ï¼Œæœç„¶ä¸å¸¸ç”¨çš„èªè¨€ä¹…äº†éƒ½æœƒç”Ÿç–ï¼Œå¯¶åˆ€æœªè€ä»€éº¼çš„éƒ½æ˜¯æµ®é›²ç½·äº†ğŸ¤£

è‡³å°‘é€™æ¬¡è¨˜å¾—äº†

1. makeä¸­çš„sizeç‚º0æ™‚çš„é™£åˆ—ï¼Œå¯ä»¥ç”¨appendä¾†å‹•æ…‹é…ç½®ï¼Œä¾†é”åˆ°ç°¡æ˜“çš„queueå¯¦ä½œ
2. å¯ä»¥ä½¿ç”¨é–‰åŒ…(Closure)ä¾†å¯¦ä½œå‡½æ•¸å…§çš„éè¿´å‡½æ•¸ï¼Œä¸¦ç›´æ¥ç”¨å€åŸŸè®Šæ•¸ä¾†æ¨¡æ“¬é–‰åŒ…ä¸­çš„å…¨åŸŸè®Šæ•¸
